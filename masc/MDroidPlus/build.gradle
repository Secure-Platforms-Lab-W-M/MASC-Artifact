/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'maven-publish'
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2')
        artifactUrls "https://repo.spring.io/plugins-release/"

    }
}

dependencies {
    implementation 'org.eclipse.core:contenttype:3.4.200-v20140207-1251'
    implementation 'org.eclipse.core:jobs:3.5.300-v20130429-1813'
    implementation 'org.eclipse.core:resources:3.3.0-v20070604'
    implementation 'org.eclipse.core:runtime:3.10.0-v20140318-2214'
    implementation 'org.eclipse.equinox:common:3.6.200-v20130402-1505'
    implementation 'org.eclipse.equinox:preferences:3.5.200-v20140224-1527'
    implementation 'org.eclipse.jdt:org.eclipse.jdt.core:3.12.3'
    implementation 'org.eclipse:osgi:3.9.1-v20130814-1242'
    implementation 'org.eclipse.equinox:app:1.0.0-v20070606'
    implementation 'commons-io:commons-io:2.6'
}

group = 'MASC_MDroidPlus'
version = '2.0.0'
description = 'MASC_MDroidPlus'
sourceCompatibility = '1.8'


//sourceSets.main.resources.srcDirs += [
//        "main/java/mplus"
//]
//sourceSets.main.resources.srcDirs = ["src"]
//sourceSets.main.java.srcDirs = ["src"]
//sourceSets {
//    main {
//        java {
//            srcDirs = ['src']
//        }
//    }
////
//    test {
//        java {
////            srcDirs = ['test']
//        }
//    }
//}

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
        }
    }
}

task fatJar(type: Jar) {
    archiveClassifier = 'uber'
    // this is necessary to exclude all the sign related files
    // otherwise, raises error due to sign mismatch of this jar and dependency jars
    exclude 'META-INF/*.RSA', 'META-INF/*.SF','META-INF/*.DSA'

    from sourceSets.main.output

    dependsOn configurations.runtimeClasspath
    from {
        configurations.runtimeClasspath.findAll { it.name.endsWith('jar') }.collect { zipTree(it) }
    }
    manifest {
        attributes "Main-Class": "edu.wm.cs.mplus.MPlus"
    }
}
